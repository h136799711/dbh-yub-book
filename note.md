## 备忘录

理财模块

下单模块

分销佣金模块



### 流程

1. 充值流程 (2次接口调用)    
    1.1 获取可用的支付通道 (前端可进行缓存)   
    1.2 创建充值订单，并返回订单id,根据订单ID,创建支付订单,并返回支付链接        
    1.4 前端将页面转发到返回的支付链接, 等待用户进行支付   
    1.4.1 用户支付失败(超时或其它原因), 不进行处理   
    1.4.2 支付成功(则进行余额增加日志记录、充值订单状态变更、支付订单状态变更)
   
2. 下单流程
    从余额里扣
    2.1 创建下单/理财订单， 余额足够 创建成功，然后扣除余额，增加日志 余额不足则创建失败 
    
3. 提现流程
    3.1 创建提现申请，
    3.2 后台进行提现审核，并使用(代付接口\人工转账)进行处理

4. 收益计算
    4.1 当天转入次日计算
    4.2 
### 定时任务

1. 充值订单超时?
2. 每日一次佣金收益统计
3. 每日一次理财收益统计
4. 支付成功订单进行佣金分配

### 用户权益

|级别|满足条件余额|每日可下订单数|最大收益金额|收益率固定值|收益率百分比|每日提现次数|   
|----|---|---|---|---|---|---|
|普通用户|0|20|0|10|0|0|
|VIP1|6000|26|500|0|0.0030|1|
|VIP2|15000|28|1300|0|0.0032|2|
|VIP3|30000|30|3000|0|0.0034|2|
|VIP4|60000|32|7000|0|0.0036|3|
|VIP5|120000|34|16000|0|0.0038|4|
|VIP6|220000|36|32000|0|0.0040|5| 


### 三级销售

一级: 16%
二级: 10%
三级: 4%

### 资产

1. 每日佣金统计   
   用户id，总收益，团队人数, 所在层级（0：总 1：一级 2：二级 3：三级）
   
2. 佣金明细   
   用户id, 变动金额，来源用户, 变动日志（一级佣金收入、二级佣金收入、三级佣金收入）
   
3. 理财产品   
   收益率, 每多少天计息, 总存款,起存金额,下期计息时间,本期计息时间
    
4. 理财产品用户持有资产表   
   用户id, 理财产品编号, 当前持有金额, 最近处理时间

5. 理财产品用户资产明细表   
   用户id, 理财产品编号, 当前金额, 变动金额(正收入负支出), 变动类型（存入利息、支出提现、存入等待、存入成功、）, 处理时间
    
6. 用户余额收益明细   
   用户id 现有余额 变动余额（4位数字 正收入负支出） 变动时间 变动类型（理财支出、理财收入、佣金收入、充值收入、提现退回、提现等待、提现成功、利息收入）
   
7. 归总钱包帐户   
   用户id 用户总余额   用户总提现金额    用户总理财收益

8. 提现记录   
  用户id  现有余额 提现金额  提现审核状态
  
  
### 问题记录

1. 如何成为代理商
2. 提现银行卡信息怎么填写？国内银行卡？
3. 下单是什么？商品？怎么确定
4. 分享是什么?   
5. Team 团队佣金和个人佣金有什么区别?   
6. Team Running 是什么？   
7. 提现是否要审核？   
8. 提现手续费   
9. 充值有没有手续费？充多少就是多少？   
10. 收益计算按什么时区算(北京时间？)，1天怎么计算的？    
11. 提现走第三方的代付接口，2块内容：1目标市场国家有哪几个银行； 2根据代付接口做一个批量转帐的后台。

